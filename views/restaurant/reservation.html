{{response.files.append(URL('static',"js/moment.min.js"))}}
{{response.files.append(URL('static',"css/fullcalendar.css"))}}
{{response.files.append(URL('static',"js/fullcalendar.js"))}}
{{extend 'layout.html'}}

<div id='calendar'></div>
<script type='text/javascript'>
  jQuery(document).ready(function() {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $('#calendar').fullCalendar({
            editable: false,
            height: $(document).height() - 200,
            events: [
                {{for i,reservation in enumerate(reservations):}}{{if i!=0:}},{{pass}}
                    {
                        title: '{{=reservation.get("name","")}} ({{=reservation.get("quantity","")}})',
                        allDay: false,
                        start: new Date('{{=reservation.planned_date.strftime('%B %d, %Y %H:%M:%S')}}'),
                    }
                {{pass}}
            ],
            dayClick: function(date) {
                $(this).css('background-color', 'red');
            },
            businessHours :{
                dow: [ 1, 2, 3, 4, 5, 6, ]
            }
        });
    });
</script>
